<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DienVL</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #eee;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background-color: #111;
      padding: 10px;
    }
    nav button {
      background: #222;
      color: #0f0;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }
    nav button:hover {
      background: #333;
    }
    section {
      display: none;
      padding: 20px;
    }
    section.active {
      display: block;
    }
    textarea, input, select {
      background: #111;
      color: #eee;
      border: 1px solid #333;
      padding: 8px;
      border-radius: 5px;
      width: 80%;
      margin: 5px 0;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      justify-content: center;
      margin: 20px auto;
    }
    .cell {
      width: 80px;
      height: 80px;
      border: 1px solid #555;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      cursor: pointer;
    }
    .cell:hover {
      background: #111;
    }
    .note {
      font-size: 12px;
      color: #888;
      margin: 10px;
    }
  </style>
</head>
<body>

<div class="note">üëâ N·∫øu ƒëang m·ªü trong T·ªáp (Files), h√£y ch·ªçn "Chia s·∫ª" ‚Üí "M·ªü trong Safari" ƒë·ªÉ d√πng ƒë·∫ßy ƒë·ªß.</div>

<nav>
  <button onclick="show('pw')">M·∫≠t kh·∫©u</button>
  <button onclick="show('note')">Ghi ch√∫</button>
  <button onclick="show('convert')">ƒê·ªïi ƒë∆°n v·ªã</button>
  <button onclick="show('clock')">ƒê·ªìng h·ªì</button>
  <button onclick="show('tic')">Caro 3x3</button>
</nav>

<section id="pw" class="active">
  <h2>Sinh m·∫≠t kh·∫©u</h2>
  <input type="number" id="pwlen" value="12" min="4" max="32">
  <button onclick="genPW()">T·∫°o</button>
  <p id="pwout"></p>
</section>

<section id="note">
  <h2>Ghi ch√∫</h2>
  <textarea id="notearea" rows="10"></textarea><br>
  <button onclick="saveNote()">L∆∞u</button>
</section>

<section id="convert">
  <h2>ƒê·ªïi ƒë∆°n v·ªã</h2>
  <input type="number" id="val" placeholder="Gi√° tr·ªã"><br>
  <select id="conv">
    <option value="cmtoin">cm ‚Üí inch</option>
    <option value="intocm">inch ‚Üí cm</option>
    <option value="kgtolb">kg ‚Üí lb</option>
    <option value="lbtokg">lb ‚Üí kg</option>
    <option value="ctof">¬∞C ‚Üí ¬∞F</option>
    <option value="ftoc">¬∞F ‚Üí ¬∞C</option>
  </select><br>
  <button onclick="convert()">ƒê·ªïi</button>
  <p id="convout"></p>
</section>

<section id="clock">
  <h2>ƒê·ªìng h·ªì</h2>
  <p id="time"></p>
</section>

<section id="tic">
  <h2>Caro 3x3</h2>
  <div class="board" id="board"></div>
  <p id="ticmsg"></p>
</section>

<script>
function show(id) {
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function genPW() {
  let len = document.getElementById('pwlen').value;
  let chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()";
  let pw = "";
  for (let i = 0; i < len; i++) {
    pw += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  document.getElementById('pwout').textContent = pw;
}

function saveNote() {
  localStorage.setItem("note", document.getElementById('notearea').value);
  alert("ƒê√£ l∆∞u!");
}
window.onload = () => {
  document.getElementById('notearea').value = localStorage.getItem("note") || "";
  updateTime();
  setInterval(updateTime, 1000);
  initTic();
}

function convert() {
  let v = parseFloat(document.getElementById('val').value);
  let type = document.getElementById('conv').value;
  let out = "";
  switch(type) {
    case "cmtoin": out = (v/2.54).toFixed(2) + " in"; break;
    case "intocm": out = (v*2.54).toFixed(2) + " cm"; break;
    case "kgtolb": out = (v*2.20462).toFixed(2) + " lb"; break;
    case "lbtokg": out = (v/2.20462).toFixed(2) + " kg"; break;
    case "ctof": out = ((v*9/5)+32).toFixed(1) + " ¬∞F"; break;
    case "ftoc": out = ((v-32)*5/9).toFixed(1) + " ¬∞C"; break;
  }
  document.getElementById('convout').textContent = out;
}

function updateTime() {
  document.getElementById('time').textContent = new Date().toLocaleTimeString();
}

// Tic Tac Toe (Caro 3x3)
let boardState = Array(9).fill(null);
let turn = "X";

function initTic() {
  let b = document.getElementById('board');
  b.innerHTML = "";
  boardState = Array(9).fill(null);
  turn = "X";
  for (let i=0;i<9;i++) {
    let cell = document.createElement('div');
    cell.className = "cell";
    cell.onclick = () => move(i, cell);
    b.appendChild(cell);
  }
}

function move(i, cell) {
  if (boardState[i]) return;
  boardState[i] = turn;
  cell.textContent = turn;
  if (checkWin(turn)) {
    document.getElementById('ticmsg').textContent = turn + " th·∫Øng!";
    return;
  }
  turn = (turn==="X"?"O":"X");
}

function checkWin(p) {
  const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  return wins.some(w => w.every(i => boardState[i]===p));
}
</script>

</body>
</html>
